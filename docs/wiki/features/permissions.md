---
generated: true
---

<!-- GENERATED BY wiki-updater — DO NOT EDIT MANUALLY -->

# 权限控制

> 给 Agent 划定安全围栏，精确控制它能用哪些工具。

## 概述

Actant 采用 Claude Code 风格的工具权限模型，通过 `allow` / `deny` / `ask` 三维列表精确控制 Agent 可以使用的工具。搭配四级预设，从完全开放到只读模式一键切换。

## 四级预设

| 预设 | 允许 | 拒绝 | 需确认 | 默认模式 | 场景 |
|------|------|------|--------|---------|------|
| `permissive` | 全部 (`*`) | 无 | 无 | `bypassPermissions` | 可信内部环境 |
| `standard` | Read, Edit, Write, 部分 Bash, WebFetch, WebSearch | 无 | Bash | `default` | 日常开发 |
| `restricted` | Read, WebSearch | Bash, WebFetch | Edit, Write | `dontAsk` | 敏感环境 |
| `readonly` | Read, WebFetch, WebSearch | Bash, Edit, Write, MultiEdit | 无 | `plan` | 纯分析 |

## 使用

### 使用预设（推荐）

在模板中直接指定预设名称：

```json
{ "permissions": "standard" }
```

### 自定义权限

逐项配置每个维度：

```json
{
  "permissions": {
    "allow": ["Read", "Edit", "Write", "Bash(npm run *)", "Bash(git *)"],
    "deny": ["WebFetch"],
    "ask": ["Bash"],
    "defaultMode": "default"
  }
}
```

### 字段说明

| 字段 | 类型 | 说明 |
|------|------|------|
| `allow` | string[] | 允许使用的工具列表，支持通配符 `*` 和参数模式 `Bash(git *)` |
| `deny` | string[] | 明确禁止的工具 |
| `ask` | string[] | 需要用户确认才能使用的工具 |
| `defaultMode` | string | 工具的默认行为模式 |

### 默认模式

| 模式 | 说明 |
|------|------|
| `bypassPermissions` | 跳过所有权限检查 |
| `default` | 正常模式，按 allow/deny/ask 规则判断 |
| `dontAsk` | 禁止弹出确认提示 |
| `plan` | 仅规划模式，不执行写操作 |

### MCP 工具自动注册

当 Agent 配置了 MCP Server 时，Actant 会自动将 MCP 工具（格式 `mcp__<server-name>`）加入 `allow` 列表，无需手动添加。

## 示例场景

### CI 机器人（严格受限）

```json
{
  "permissions": {
    "allow": ["Read", "Bash(npm test)", "Bash(npm run lint)"],
    "deny": ["Write", "Edit", "WebFetch"],
    "ask": [],
    "defaultMode": "dontAsk"
  }
}
```

### 代码审查员（只读 + 搜索）

```json
{ "permissions": "readonly" }
```

### 全能开发者（完全信任）

```json
{ "permissions": "permissive" }
```

---

详见源码 `packages/core/src/permissions/permission-presets.ts`。
