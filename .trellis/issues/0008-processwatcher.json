{
  "id": 8,
  "title": "ProcessWatcher：进程退出检测与心跳监控",
  "status": "closed",
  "labels": [
    "core",
    "feature",
    "launcher",
    "priority:P0"
  ],
  "milestone": "near-term",
  "body": "## 目标\n\n为所有 LaunchMode 提供进程存活的统一监控能力。当前 ProcessLauncher 只在 spawn 时做一次性检测，之后进程退出/崩溃无法感知。\n\n## 功能\n\n1. **ProcessWatcher** 组件：定时轮询 `isProcessAlive(pid)`，检测已启动 Agent 的进程退出\n2. 进程退出时：\n   - 更新 `AgentInstanceMeta.status` → `stopped` 或 `error`（根据退出码）\n   - 清除 `pid` 字段\n   - 触发事件/回调（供崩溃重启、通知等插件使用）\n3. 可配置轮询间隔（默认 5s）\n4. 与 `AgentManager` 集成，start 时注册监控，stop/destroy 时注销\n\n## 验收\n\n- Agent 进程被外部 kill 后，status 自动变为 stopped/error\n- 守护进程日志记录进程退出事件\n- 单元测试覆盖正常退出、异常退出、进程已死等场景",
  "author": "cursor-agent",
  "assignees": [],
  "relatedFiles": [],
  "relatedIssues": [],
  "taskRef": null,
  "githubRef": null,
  "closedAs": "completed",
  "comments": [
    {
      "text": "[Review 2026-02-20] #8 是整个 Phase 1 的关键路径起点（P0），当前无 assignee 且未 promote 为 Task。Roadmap 已标注其为第一优先，建议立即启动。依赖链：#9、#10、#11、#15 全部等待 #8 完成。",
      "date": "2026-02-20T12:24:57",
      "author": "cursor-agent"
    },
    {
      "text": "Closed as completed",
      "date": "2026-02-20T15:09:27",
      "author": "cursor-agent"
    }
  ],
  "createdAt": "2026-02-20T11:34:58",
  "updatedAt": "2026-02-20T15:09:27",
  "closedAt": "2026-02-20T15:09:27"
}
