{
  "id": 55,
  "title": "Actant å®‰è£…æµç¨‹ Â· Help æŒ‡ä»¤ Â· æœ¬åœ°éƒ¨ç½²è‡ªæ›´æ–°æœºåˆ¶",
  "status": "open",
  "labels": ["feature", "cli", "devx", "documentation", "priority:P0"],
  "milestone": "phase-3",
  "body": "## èƒŒæ™¯\n\nActant å·²å®Œæˆ Phase 1â€“3 æ ¸å¿ƒåŠŸèƒ½å¼€å‘ï¼Œä½†ç¼ºä¹æ­£å¼çš„å®‰è£…æµç¨‹ã€å†…ç½®å¸®åŠ©ç³»ç»Ÿå’Œæœ¬åœ°éƒ¨ç½²æ›´æ–°æœºåˆ¶ã€‚ç”¨æˆ·ï¼ˆå¼€å‘è€…æœ¬äººï¼‰éœ€è¦ï¼š\n1. å°† Actant å®‰è£…åˆ°åˆé€‚çš„å…¨å±€ç›®å½•ï¼Œä½œä¸ºæ—¥å¸¸æŒç»­ä½¿ç”¨çš„å·¥å…·\n2. é€šè¿‡ `actant help` å¿«é€ŸæŸ¥é˜…å¯ç”¨å‘½ä»¤å’Œç”¨æ³•\n3. åœ¨æŒç»­å¼€å‘è¿‡ç¨‹ä¸­ï¼Œèƒ½å°†æœ€æ–°ä»£ç æ— ç¼æ›´æ–°åˆ°æœ¬åœ°å·²éƒ¨ç½²çš„ç‰ˆæœ¬ï¼ŒåŒæ—¶ä¿æŒå·²è¿è¡Œ Agent çš„æ­£å¸¸å·¥ä½œ\n\n## ä¸€ã€æ­£å¼å®‰è£…æµç¨‹æ–‡æ¡£ä¸è„šæœ¬ (Install)\n\n### é—®é¢˜\n\nå½“å‰ Actant åªèƒ½åœ¨å¼€å‘ç›®å½•ä¸­é€šè¿‡ `pnpm dev` è¿è¡Œï¼Œæ²¡æœ‰æ­£å¼çš„å®‰è£…æµç¨‹ã€‚ä½œä¸ºä¸€ä¸ªéœ€è¦æŒç»­ä½¿ç”¨çš„å¼€å‘è€…å·¥å…·ï¼Œéœ€è¦ï¼š\n- å…¨å±€å¯æ‰§è¡Œçš„ `actant` å‘½ä»¤\n- åˆç†çš„ç›®å½•ç»“æ„ï¼ˆä»£ç ç›®å½• vs æ•°æ®ç›®å½• vs é…ç½®ç›®å½•ï¼‰\n- å¼€å‘æ¨¡å¼ä¸ç”Ÿäº§æ¨¡å¼å¹¶å­˜\n\n### æ–¹æ¡ˆ\n\n#### 1.1 ç›®å½•è§„åˆ’\n\n```\nå¼€å‘ç›®å½•ï¼ˆæºç ï¼‰:\n  G:/Workspace/AgentWorkSpace/AgentCraft/   # æŒç»­å¼€å‘\n\nè¿è¡Œæ—¶æ•°æ®ç›®å½• (~/.actant/):\n  ~/.actant/\n  â”œâ”€â”€ config.json          # å…¨å±€é…ç½®\n  â”œâ”€â”€ data/\n  â”‚   â”œâ”€â”€ templates/       # ç”¨æˆ·æ¨¡æ¿\n  â”‚   â”œâ”€â”€ agents/          # Agent å®ä¾‹ workspace\n  â”‚   â””â”€â”€ sources/         # ç¼“å­˜çš„ Source å†…å®¹\n  â”œâ”€â”€ logs/                # Daemon æ—¥å¿—\n  â””â”€â”€ daemon.sock          # Daemon socket\n```\n\n#### 1.2 å®‰è£…æ–¹å¼\n\n**æ–¹å¼ A â€” pnpm linkï¼ˆå¼€å‘è€…æ¨èï¼‰ï¼š**\n```bash\n# åœ¨é¡¹ç›®æ ¹ç›®å½•\npnpm build\npnpm --filter @actant/cli link --global\n\n# éªŒè¯\nactant --version\nactant help\n```\n\n**æ–¹å¼ B â€” npm global installï¼ˆå‘å¸ƒåï¼‰ï¼š**\n```bash\nnpm install -g actant\n```\n\n**æ–¹å¼ C â€” è„šæœ¬å®‰è£…ï¼ˆä¾¿æ·ï¼‰ï¼š**\næä¾› `scripts/install.sh`ï¼ˆLinux/macOSï¼‰å’Œ `scripts/install.ps1`ï¼ˆWindowsï¼‰ï¼š\n- æ£€æŸ¥ Node.js >= 22ã€pnpm >= 9\n- `pnpm install && pnpm build`\n- `pnpm --filter @actant/cli link --global`\n- åˆ›å»º `~/.actant/` ç›®å½•ç»“æ„\n- éªŒè¯å®‰è£…æˆåŠŸ\n\n#### 1.3 å®‰è£…æ–‡æ¡£\n\nåœ¨ `docs/getting-started.md` åˆ›å»ºæ­£å¼å®‰è£…æ–‡æ¡£ï¼š\n- å‰ç½®ä¾èµ–ï¼ˆNode.js 22+ã€pnpm 9+ï¼‰\n- ä¸‰ç§å®‰è£…æ–¹å¼çš„æ­¥éª¤è¯´æ˜\n- é¦–æ¬¡è¿è¡Œå¼•å¯¼ï¼ˆ`actant daemon start` â†’ `actant agent create`ï¼‰\n- ç›®å½•ç»“æ„è¯´æ˜\n- å¸¸è§é—®é¢˜ï¼ˆæƒé™ã€PATHã€socket è·¯å¾„ï¼‰\n\n### éªŒæ”¶æ ‡å‡† â€” Install\n\n- [ ] `scripts/install.ps1`ï¼ˆWindowsï¼‰å®‰è£…è„šæœ¬å¯ç”¨\n- [ ] `scripts/install.sh`ï¼ˆLinux/macOSï¼‰å®‰è£…è„šæœ¬å¯ç”¨\n- [ ] å®‰è£…å `actant` å…¨å±€å‘½ä»¤å¯ç”¨\n- [ ] `docs/getting-started.md` åŒ…å«å®Œæ•´å®‰è£…æŒ‡å—\n- [ ] `~/.actant/` ç›®å½•ç»“æ„åœ¨é¦–æ¬¡è¿è¡Œæ—¶è‡ªåŠ¨åˆ›å»º\n\n---\n\n## äºŒã€Help æŒ‡ä»¤å®ç° (Help)\n\n### é—®é¢˜\n\nå½“å‰ CLI ä½¿ç”¨ commander çš„é»˜è®¤ `-h/--help` æœºåˆ¶ï¼Œç¼ºå°‘ï¼š\n- é¡¶å±‚ `actant help` å­å‘½ä»¤ï¼ˆä¸æ­¢ `--help` flagï¼‰\n- åˆ†ç»„å±•ç¤ºå‘½ä»¤ï¼ˆAgent ç®¡ç†ã€ç»„ä»¶ç®¡ç†ã€ç³»ç»Ÿç®¡ç†ï¼‰\n- å¸¸ç”¨ workflow ç¤ºä¾‹\n- ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„å¸®åŠ©ï¼ˆ`actant help agent` æ˜¾ç¤º agent å­å‘½ä»¤çš„è¯¦ç»†å¸®åŠ©ï¼‰\n\n### æ–¹æ¡ˆ\n\n#### 2.1 `actant help` é¡¶å±‚å‘½ä»¤\n\n```\n$ actant help\n\n  Actant v0.1.0 â€” Build, manage, and compose AI agents\n\n  Quick Start:\n    actant daemon start              å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹\n    actant agent create my-agent     åˆ›å»º Agent\n    actant agent start my-agent      å¯åŠ¨ Agent\n    actant agent chat my-agent       ä¸ Agent å¯¹è¯\n\n  Agent ç®¡ç†:\n    agent create|start|stop|list|chat|run    ç®¡ç† Agent ç”Ÿå‘½å‘¨æœŸ\n    template list|show                       ç®¡ç† Agent æ¨¡æ¿\n    proxy <name>                             ACP ä»£ç†è½¬å‘\n\n  ç»„ä»¶ç®¡ç†:\n    skill list|add|remove|show       ç®¡ç†æŠ€èƒ½å®šä¹‰\n    prompt list|add|remove|show      ç®¡ç†æç¤ºè¯\n    mcp list|show                    ç®¡ç† MCP Server é…ç½®\n    workflow list|show               ç®¡ç†å·¥ä½œæµ\n    plugin list|add|remove|show      ç®¡ç†æ’ä»¶\n\n  å…±äº«ç”Ÿæ€:\n    source list|add|remove|sync      ç®¡ç†ç»„ä»¶æ¥æº\n    preset list|apply                ç®¡ç†é¢„è®¾åŒ…\n\n  è°ƒåº¦:\n    schedule start|stop|status       ç®¡ç†é›‡å‘˜å‹ Agent è°ƒåº¦\n\n  ç³»ç»Ÿ:\n    daemon start|stop|status         Daemon ç®¡ç†\n    help [command]                   æŸ¥çœ‹å¸®åŠ©\n    --version                        æ˜¾ç¤ºç‰ˆæœ¬å·\n\n  Tips:\n    ä½¿ç”¨ actant help <command> æŸ¥çœ‹è¯¦ç»†å¸®åŠ©\n    ç›´æ¥è¿è¡Œ actant è¿›å…¥äº¤äº’å¼ REPL æ¨¡å¼\n```\n\n#### 2.2 `actant help <command>` å­å‘½ä»¤å¸®åŠ©\n\n```\n$ actant help agent\n\n  Agent ç®¡ç†å‘½ä»¤\n\n  actant agent create <name> [--template <tpl>]  åˆ›å»ºæ–° Agent\n  actant agent start <name>                      å¯åŠ¨ Agent\n  actant agent stop <name>                       åœæ­¢ Agent\n  actant agent list                              åˆ—å‡ºæ‰€æœ‰ Agent\n  actant agent chat <name>                       è¿›å…¥äº¤äº’å¯¹è¯\n  actant agent run <name> --prompt <text>         å•æ¬¡è¿è¡Œ\n  actant agent dispatch <name> --input <data>     è§¦å‘è°ƒåº¦ä»»åŠ¡\n\n  ç¤ºä¾‹:\n    actant agent create reviewer --template code-review-agent\n    actant agent start reviewer\n    actant agent chat reviewer\n```\n\n#### 2.3 å®ç°æ–¹å¼\n\nåœ¨ `packages/cli/src/commands/help.ts` åˆ›å»º help å‘½ä»¤ï¼š\n- ä½¿ç”¨ commander çš„ `.helpInformation()` è·å–å„å‘½ä»¤å¸®åŠ©æ–‡æœ¬\n- è‡ªå®šä¹‰æ ¼å¼åŒ–è¾“å‡ºï¼ˆåˆ†ç»„ã€ç€è‰²ã€Quick Startï¼‰\n- `actant help` â†’ æ˜¾ç¤ºæ€»è§ˆ\n- `actant help <cmd>` â†’ æ˜¾ç¤ºç‰¹å®šå‘½ä»¤çš„è¯¦ç»†å¸®åŠ©\n- `actant help <cmd> <subcmd>` â†’ æ˜¾ç¤ºå­å‘½ä»¤å¸®åŠ©\n\n### éªŒæ”¶æ ‡å‡† â€” Help\n\n- [ ] `actant help` æ˜¾ç¤ºåˆ†ç»„çš„å‘½ä»¤æ€»è§ˆå’Œ Quick Start\n- [ ] `actant help <command>` æ˜¾ç¤ºç‰¹å®šå‘½ä»¤çš„è¯¦ç»†å¸®åŠ©å’Œç¤ºä¾‹\n- [ ] help è¾“å‡ºåŒ…å« chalk ç€è‰²ï¼ˆç»ˆç«¯å‹å¥½ï¼‰\n- [ ] åœ¨ program.ts ä¸­æ³¨å†Œ help å‘½ä»¤\n\n---\n\n## ä¸‰ã€æœ¬åœ°éƒ¨ç½²è‡ªæ›´æ–°æœºåˆ¶ (Self-Update) â€” Agent é©±åŠ¨æ¶æ„\n\n### é—®é¢˜\n\nç”¨æˆ·åœ¨åŒä¸€å°æœºå™¨ä¸Šï¼š\n- **å¼€å‘**ï¼šæŒç»­åœ¨æºç ç›®å½•å¼€å‘ Actant æ–°åŠŸèƒ½\n- **ä½¿ç”¨**ï¼šåŒæ—¶ä½œä¸ºæ—¥å¸¸å·¥å…·ä½¿ç”¨æœ¬åœ°éƒ¨ç½²çš„ Actant ç®¡ç† Agent\n\nä¼ ç»Ÿçš„ã€Œè‡ªå·±æ›´æ–°è‡ªå·±ã€æ–¹æ¡ˆï¼ˆin-place updateï¼‰å­˜åœ¨æ ¹æœ¬çŸ›ç›¾ï¼šæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹æ— æ³•å®‰å…¨æ›¿æ¢è‡ªèº«äºŒè¿›åˆ¶ã€‚Actant æ‹¥æœ‰ Agent ç®¡ç†èƒ½åŠ›ï¼Œå¯ä»¥ä¼˜é›…åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n### æ ¸å¿ƒè®¾è®¡ï¼šUpdater Agent æ¨¡å¼\n\n**å…³é”®æ´å¯Ÿ**ï¼šAgent è¿›ç¨‹ç‹¬ç«‹äº Daemonã€‚Actant å¯ä»¥å¯åŠ¨ä¸€ä¸ªã€Œæ›´æ–°è€… Agentã€ï¼Œç”±å®ƒæ¥æ¥ç®¡æ›´æ–°æµç¨‹ï¼ŒActant è‡ªèº«å®‰å…¨é€€å‡ºåè¢«æ›´æ–°ã€‚\n\n```\næ—¶åºå›¾ï¼š\n\n  ç”¨æˆ·/AI                Actant Daemon            Updater Agent\n    â”‚                        â”‚                        â”‚\n    â”‚â”€â”€ actant self-update â”€â–ºâ”‚                        â”‚\n    â”‚                        â”‚â”€â”€ 1. é¢„æ£€æŸ¥ï¼ˆç‰ˆæœ¬ã€è„æ£€æŸ¥ï¼‰\n    â”‚                        â”‚â”€â”€ 2. å¿«ç…§å½“å‰çŠ¶æ€ â”€â”€â”€â”€â”€â”€â–ºâ”‚ å†™å…¥ update-manifest.json\n    â”‚                        â”‚â”€â”€ 3. å¤‡ä»½å½“å‰éƒ¨ç½²ç‰ˆæœ¬    â”‚\n    â”‚                        â”‚â”€â”€ 4. è®°å½•è¿è¡Œä¸­ Agent PID â”‚\n    â”‚                        â”‚â”€â”€ 5. å¯åŠ¨ Updater Agent â”€â–ºâ”‚ (ç‹¬ç«‹è¿›ç¨‹ï¼Œè„±ç¦» Daemon)\n    â”‚                        â”‚â”€â”€ 6. Daemon ä¼˜é›…é€€å‡º     â”‚\n    â”‚                        âœ—                        â”‚\n    â”‚                                                 â”‚â”€â”€ 7. è¯»å– manifest\n    â”‚                                                 â”‚â”€â”€ 8. åœ¨æºç ç›®å½•: pnpm install && pnpm build\n    â”‚                                                 â”‚â”€â”€ 9. é‡æ–° link æ–°ç‰ˆæœ¬\n    â”‚                                                 â”‚â”€â”€ 10. éªŒè¯: actant --version\n    â”‚                                                 â”‚â”€â”€ 11a. æˆåŠŸ â†’ å¯åŠ¨æ–° Daemon\n    â”‚                                                 â”‚â”€â”€ 11b. å¤±è´¥ â†’ å›æ»šå¤‡ä»½ â†’ å¯åŠ¨æ—§ Daemon\n    â”‚                        â”‚â—„â”€â”€ 12. æ–° Daemon å¯åŠ¨ â”€â”€â”‚\n    â”‚                        â”‚â”€â”€ 13. reattach è¿è¡Œä¸­ Agent (æŒ‰ PID)\n    â”‚                        â”‚â”€â”€ 14. å†™å…¥ update-result.json\n    â”‚                        â”‚                        â”‚â”€â”€ 15. è‡ªæˆ‘é”€æ¯\n    â”‚                        â”‚                        âœ—\n    â”‚â—„â”€â”€ æ›´æ–°å®Œæˆé€šçŸ¥ â”€â”€â”€â”€â”€â”€â”€â”€â”‚\n```\n\n### æ–¹æ¡ˆè¯¦ç»†è®¾è®¡\n\n#### 3.1 `actant self-update` å‘½ä»¤\n\n```bash\nactant self-update [--source <path>] [--check] [--force] [--dry-run]\n```\n\n- `--source <path>`ï¼šæºç ç›®å½•ï¼Œé»˜è®¤è¯»å– `~/.actant/config.json` çš„ `devSourcePath`\n- `--check`ï¼šåªæ£€æŸ¥ç‰ˆæœ¬å·®å¼‚ï¼Œä¸æ‰§è¡Œæ›´æ–°\n- `--force`ï¼šè·³è¿‡æ´»è·ƒ session è­¦å‘Š\n- `--dry-run`ï¼šæ¨¡æ‹Ÿæ‰§è¡Œï¼Œæ˜¾ç¤ºå°†è¦åšçš„æ“ä½œ\n\n#### 3.2 Update Manifestï¼ˆçŠ¶æ€äº¤æ¥æ–‡ä»¶ï¼‰\n\nActant é€€å‡ºå‰å†™å…¥ `~/.actant/update-manifest.json`ï¼Œä½œä¸º Updater Agent çš„ã€Œä»»åŠ¡ä¹¦ã€ï¼š\n\n```json\n{\n  \"updateId\": \"upd-20260222-143000\",\n  \"createdAt\": \"2026-02-22T14:30:00Z\",\n  \"sourcePath\": \"G:/Workspace/AgentWorkSpace/AgentCraft\",\n  \"installedVersion\": {\n    \"version\": \"0.1.0\",\n    \"commitHash\": \"abc1234\",\n    \"buildTime\": \"2026-02-22T10:00:00Z\"\n  },\n  \"backupPath\": \"~/.actant/backups/0.1.0-abc1234/\",\n  \"runningAgents\": [\n    { \"name\": \"reviewer\", \"pid\": 12345, \"workspaceDir\": \"~/.actant/data/agents/reviewer\" },\n    { \"name\": \"assistant\", \"pid\": 67890, \"workspaceDir\": \"~/.actant/data/agents/assistant\" }\n  ],\n  \"daemonSocketPath\": \"~/.actant/daemon.sock\",\n  \"rollbackOnFailure\": true,\n  \"phase\": \"pending\"\n}\n```\n\n#### 3.3 Updater Agent â€” å†…ç½®ç³»ç»Ÿæ¨¡æ¿\n\næä¾›å†…ç½®æ¨¡æ¿ `configs/templates/_system-updater.json`ï¼š\n\n```json\n{\n  \"name\": \"_system-updater\",\n  \"description\": \"Actant å†…ç½®è‡ªæ›´æ–° Agentï¼ˆç³»ç»Ÿçº§ï¼Œä¸å¯¹ç”¨æˆ·æš´éœ²ï¼‰\",\n  \"backendType\": \"custom\",\n  \"backendConfig\": {\n    \"executablePath\": \"node\",\n    \"args\": [\"--import\", \"tsx\", \"packages/cli/src/updater/updater-agent.ts\"]\n  },\n  \"launchMode\": \"one-shot\",\n  \"workspacePolicy\": \"ephemeral\"\n}\n```\n\nå®é™…ä¸Š Updater Agent å¯ä»¥æ›´è½»é‡ï¼šä¸€ä¸ªçº¯ Node.js è„šæœ¬ï¼ˆä¸ä¾èµ– Daemon è¿è¡Œï¼‰ï¼Œé€šè¿‡ `child_process.spawn` ä»¥ `detached: true, stdio: 'ignore'` å¯åŠ¨ï¼Œç¡®ä¿ Daemon é€€å‡ºåä»ç„¶å­˜æ´»ã€‚\n\n#### 3.4 Updater Agent æ ¸å¿ƒé€»è¾‘ (`packages/cli/src/updater/updater-agent.ts`)\n\n```typescript\n// Updater Agent æ‰§è¡Œæµç¨‹ï¼ˆç‹¬ç«‹è¿›ç¨‹ï¼ŒDaemon å·²é€€å‡ºï¼‰\nasync function runUpdate() {\n  const manifest = readUpdateManifest();  // è¯»å–ä»»åŠ¡ä¹¦\n  updatePhase(manifest, 'building');\n\n  try {\n    // â•â•â• ç”¨æˆ·æ•°æ®ä¿æŠ¤ â•â•â•\n    // Updater åªæ“ä½œç¼–è¯‘äº§ç‰©ï¼ˆdist/ï¼‰ï¼Œç»ä¸è§¦ç¢°ï¼š\n    //   - ~/.actant/data/agents/*   ï¼ˆAgent workspace + ç”¨æˆ·äº¤äº’å†å²ï¼‰\n    //   - ~/.actant/data/templates/* ï¼ˆç”¨æˆ·è‡ªå®šä¹‰æ¨¡æ¿ï¼‰\n    //   - ~/.actant/data/sources/*   ï¼ˆå·²ç¼“å­˜çš„ Source å†…å®¹ï¼‰\n    //   - ~/.actant/config.json      ï¼ˆç”¨æˆ·å…¨å±€é…ç½®ï¼‰\n    //   - å„ Agent çš„ .actant.json   ï¼ˆå®ä¾‹å…ƒæ•°æ®ï¼‰\n\n    // Step 1: ç¼–è¯‘æ–°ç‰ˆæœ¬\n    await exec('pnpm install --frozen-lockfile', { cwd: manifest.sourcePath });\n    await exec('pnpm build', { cwd: manifest.sourcePath });\n    updatePhase(manifest, 'built');\n\n    // Step 2: é‡æ–° link\n    await exec('pnpm --filter @actant/cli link --global', { cwd: manifest.sourcePath });\n    updatePhase(manifest, 'linked');\n\n    // Step 3: éªŒè¯æ–°ç‰ˆæœ¬\n    const versionOutput = await exec('actant --version');\n    if (!versionOutput.includes('actant')) throw new Error('Version check failed');\n    updatePhase(manifest, 'verified');\n\n    // Step 4: å¯åŠ¨æ–° Daemon\n    await exec('actant daemon start');\n    updatePhase(manifest, 'daemon-started');\n\n    // Step 5: éªŒè¯ Agent æ¢å¤\n    for (const agent of manifest.runningAgents) {\n      const alive = await isProcessAlive(agent.pid);\n      if (alive) {\n        // Agent è¿›ç¨‹ä»åœ¨è¿è¡Œï¼Œæ–° Daemon ä¼šè‡ªåŠ¨ reattach\n        log(`Agent ${agent.name} (PID ${agent.pid}) still alive âœ“`);\n      } else {\n        log(`Agent ${agent.name} (PID ${agent.pid}) no longer running âš `);\n      }\n    }\n\n    // Step 6: å†™å…¥æˆåŠŸç»“æœ\n    writeUpdateResult(manifest.updateId, {\n      status: 'success',\n      newVersion: versionOutput.trim(),\n      agentStatus: manifest.runningAgents.map(a => ({\n        name: a.name,\n        alive: isProcessAlive(a.pid)\n      }))\n    });\n\n  } catch (err) {\n    // â•â•â• å›æ»š â•â•â•\n    log(`Update failed: ${err}. Rolling back...`);\n    updatePhase(manifest, 'rolling-back');\n\n    try {\n      await restoreBackup(manifest.backupPath);\n      await exec('pnpm --filter @actant/cli link --global', { cwd: manifest.sourcePath });\n      await exec('actant daemon start');\n      writeUpdateResult(manifest.updateId, { status: 'rolled-back', error: String(err) });\n    } catch (rollbackErr) {\n      writeUpdateResult(manifest.updateId, {\n        status: 'critical-failure',\n        error: String(err),\n        rollbackError: String(rollbackErr)\n      });\n    }\n  }\n\n  // Step 7: è‡ªæˆ‘æ¸…ç†ï¼ˆephemeral workspace è‡ªåŠ¨é”€æ¯ï¼‰\n  process.exit(0);\n}\n```\n\n#### 3.5 ç”¨æˆ·æ•°æ®ä¿æŠ¤ç­–ç•¥ï¼ˆæ ¸å¿ƒå®‰å…¨è®¾è®¡ï¼‰\n\n```\nç”¨æˆ·æ•°æ®ä¿æŠ¤ä¸‰åŸåˆ™ï¼š\n\n1. ã€Œåªç¢°ç¼–è¯‘äº§ç‰©ï¼Œä¸ç¢°ç”¨æˆ·æ•°æ®ã€\n   Updater Agent æ“ä½œèŒƒå›´ä¸¥æ ¼é™å®šä¸ºï¼š\n   âœ… æºç ç›®å½•çš„ node_modules/ å’Œ dist/ï¼ˆç¼–è¯‘äº§ç‰©ï¼‰\n   âœ… å…¨å±€ link ç¬¦å·é“¾æ¥ï¼ˆæŒ‡å‘æ–° distï¼‰\n   âŒ ç»ä¸è¯»å†™ ~/.actant/data/ï¼ˆAgent workspaceã€æ¨¡æ¿ã€Source ç¼“å­˜ï¼‰\n   âŒ ç»ä¸ä¿®æ”¹ ~/.actant/config.jsonï¼ˆç”¨æˆ·é…ç½®ï¼‰\n   âŒ ç»ä¸åˆ é™¤ä»»ä½• .actant.jsonï¼ˆå®ä¾‹å…ƒæ•°æ®ï¼‰\n\n2. ã€Œå…ˆå¤‡ä»½ï¼Œåæ“ä½œã€\n   æ›´æ–°å‰å°†å½“å‰ dist/ ç›®å½•å¤‡ä»½åˆ° ~/.actant/backups/<version>-<hash>/\n   å¤‡ä»½é‡‡ç”¨ç¡¬é“¾æ¥ï¼ˆç§’çº§å®Œæˆï¼Œä¸å é¢å¤–ç©ºé—´ï¼‰\n   ä¿ç•™æœ€è¿‘ N ä¸ªå¤‡ä»½ï¼ˆé»˜è®¤ 3 ä¸ªï¼‰ï¼Œæ—§å¤‡ä»½è‡ªåŠ¨æ¸…ç†\n\n3. ã€ŒåŸå­åˆ‡æ¢ + å¤±è´¥å›æ»šã€\n   link æ“ä½œæ˜¯åŸå­çš„ï¼ˆç¬¦å·é“¾æ¥æ›¿æ¢ï¼‰\n   å¦‚æœæ–°ç‰ˆæœ¬éªŒè¯å¤±è´¥ï¼Œç«‹å³æ¢å¤å¤‡ä»½çš„ link\n   å¦‚æœ Daemon å¯åŠ¨å¤±è´¥ï¼Œç«‹å³å›æ»šå¹¶é‡å¯æ—§ç‰ˆ Daemon\n\næ•°æ®éš”ç¦»æ¶æ„ï¼š\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚          ~/.actant/ (ACTANT_HOME)      â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  config.json        ğŸ”’ ä¸å¯è§¦ç¢°       â”‚\nâ”‚  data/                                â”‚\nâ”‚  â”œâ”€â”€ agents/*       ğŸ”’ ä¸å¯è§¦ç¢°       â”‚\nâ”‚  â”œâ”€â”€ templates/*    ğŸ”’ ä¸å¯è§¦ç¢°       â”‚\nâ”‚  â””â”€â”€ sources/*      ğŸ”’ ä¸å¯è§¦ç¢°       â”‚\nâ”‚  logs/              ğŸ”’ ä¿ç•™ï¼ˆè¿½åŠ å†™å…¥ï¼‰ â”‚\nâ”‚  daemon.sock        â™»ï¸ Daemon é‡å»º     â”‚\nâ”‚  backups/           ğŸ“¦ Updater ç®¡ç†    â”‚\nâ”‚  update-manifest.json â™»ï¸ Updater è¯»å†™  â”‚\nâ”‚  update-result.json   â™»ï¸ Updater å†™å…¥  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚        æºç ç›®å½• (devSourcePath)        â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  node_modules/      â™»ï¸ pnpm install   â”‚\nâ”‚  packages/*/dist/   â™»ï¸ pnpm build     â”‚\nâ”‚  å…¶ä»–æºç æ–‡ä»¶        ğŸ”’ åªè¯»           â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n#### 3.6 å…¨å±€é…ç½® `~/.actant/config.json`\n\n```json\n{\n  \"devSourcePath\": \"G:/Workspace/AgentWorkSpace/AgentCraft\",\n  \"update\": {\n    \"maxBackups\": 3,\n    \"preUpdateTestCommand\": \"pnpm test:changed\",\n    \"autoRestartAgents\": true\n  }\n}\n```\n\n#### 3.7 `actant self-update --check` ç‰ˆæœ¬å¯¹æ¯”\n\n```typescript\n// actant self-update --check\n{\n  \"installed\": {\n    \"version\": \"0.1.0\",\n    \"buildTime\": \"2026-02-22T10:00:00Z\",\n    \"commitHash\": \"abc1234\"\n  },\n  \"source\": {\n    \"version\": \"0.1.0\",\n    \"commitHash\": \"def5678\",\n    \"dirty\": true,\n    \"uncommittedChanges\": 5,\n    \"ahead\": 3\n  },\n  \"needsUpdate\": true,\n  \"lastUpdate\": {\n    \"updateId\": \"upd-20260222-100000\",\n    \"status\": \"success\",\n    \"time\": \"2026-02-22T10:00:00Z\"\n  }\n}\n```\n\n#### 3.8 AI è¾…åŠ©æ›´æ–°å·¥ä½œæµ\n\nå¯¹äº Cursor ä¸­çš„ AI åŠ©æ‰‹ï¼Œæ›´æ–°æµç¨‹è‡ªç„¶èå…¥å¼€å‘å¾ªç¯ï¼š\n\n```\n1. AI å®Œæˆä»£ç ä¿®æ”¹\n2. AI è¿è¡Œ pnpm test:changed ç¡®ä¿æµ‹è¯•é€šè¿‡\n3. AI è¿è¡Œ actant self-update\n   â†’ Actant è‡ªåŠ¨: é¢„æ£€ â†’ å¤‡ä»½ â†’ å¯åŠ¨ Updater Agent â†’ é€€å‡º\n   â†’ Updater Agent: build â†’ link â†’ verify â†’ å¯åŠ¨æ–° Daemon â†’ è‡ªæ¯\n4. AI è¿è¡Œ actant self-update --check ç¡®è®¤æ›´æ–°æˆåŠŸ\n5. AI è¿è¡Œ actant agent list ç¡®è®¤ Agent æ­£å¸¸\n```\n\nå¯å°è£…ä¸º `.agents/skills/self-update/SKILL.md` æˆ– `.cursor/commands/update.md`ã€‚\n\n#### 3.9 è¾¹ç•Œæƒ…å†µå¤„ç†\n\n| åœºæ™¯ | å¤„ç†æ–¹å¼ |\n|------|----------|\n| ç¼–è¯‘å¤±è´¥ï¼ˆpnpm build æŠ¥é”™ï¼‰ | Updater Agent ç›´æ¥å›æ»šï¼Œé‡å¯æ—§ç‰ˆ Daemon |\n| link å¤±è´¥ï¼ˆæƒé™é—®é¢˜ï¼‰ | å›æ»š + æŠ¥é”™åˆ° update-result.json |\n| æ–° Daemon å¯åŠ¨å¤±è´¥ | å›æ»šåˆ°å¤‡ä»½ç‰ˆæœ¬ï¼Œå¯åŠ¨æ—§ç‰ˆ Daemon |\n| Updater Agent è‡ªèº«å´©æºƒ | update-manifest.json ä¸­ phase å­—æ®µè®°å½•è¿›åº¦ï¼Œä¸‹æ¬¡ `actant daemon start` æ£€æµ‹åˆ°æœªå®Œæˆçš„æ›´æ–°ï¼Œæç¤ºç”¨æˆ·æ‰‹åŠ¨å¤„ç† |\n| æ›´æ–°é€”ä¸­æ–­ç”µ | åŒä¸Šï¼šDaemon å¯åŠ¨æ—¶æ£€æµ‹ manifest çŠ¶æ€ï¼Œæ‰§è¡Œæ¢å¤ |\n| æœ‰ Agent æ­£åœ¨æ´»è·ƒäº¤äº’ | é¢„æ£€è­¦å‘Šï¼Œéœ€ --force ç¡®è®¤ï¼›Agent è¿›ç¨‹ä¸å—å½±å“ï¼ˆç‹¬ç«‹è¿›ç¨‹ï¼‰ |\n| æºç ç›®å½•æœ‰æœªæäº¤æ›´æ”¹ | --check æŠ¥å‘Š dirty çŠ¶æ€ï¼Œé»˜è®¤å…è®¸ï¼ˆå¼€å‘åœºæ™¯å¸¸æ€ï¼‰ |\n\n### éªŒæ”¶æ ‡å‡† â€” Self-Update\n\n- [ ] `~/.actant/config.json` æ”¯æŒ `devSourcePath` å’Œ `update` é…ç½®\n- [ ] `actant self-update --check` æ˜¾ç¤ºç‰ˆæœ¬å¯¹æ¯”å’Œä¸Šæ¬¡æ›´æ–°çŠ¶æ€\n- [ ] `actant self-update` å®Œæ•´æ‰§è¡Œ Agent é©±åŠ¨æ›´æ–°æµç¨‹\n- [ ] Updater Agent ä»¥ detached ç‹¬ç«‹è¿›ç¨‹è¿è¡Œï¼ŒDaemon é€€å‡ºåä»å­˜æ´»\n- [ ] update-manifest.json æ­£ç¡®è®°å½•ä»»åŠ¡çŠ¶æ€å’Œè¿è¡Œä¸­ Agent ä¿¡æ¯\n- [ ] æ›´æ–°è¿‡ç¨‹ä¸­ç”¨æˆ·æ•°æ®ï¼ˆ~/.actant/data/ï¼‰é›¶æ¥è§¦\n- [ ] æ›´æ–°å‰è‡ªåŠ¨å¤‡ä»½ dist/ ç¼–è¯‘äº§ç‰©\n- [ ] ç¼–è¯‘/link/éªŒè¯ä»»ä¸€æ­¥éª¤å¤±è´¥æ—¶è‡ªåŠ¨å›æ»š\n- [ ] æ–° Daemon å¯åŠ¨åè‡ªåŠ¨ reattach è¿è¡Œä¸­çš„ Agent\n- [ ] update-result.json è®°å½•æ›´æ–°ç»“æœä¾›æŸ¥è¯¢\n- [ ] Daemon å¯åŠ¨æ—¶æ£€æµ‹æœªå®Œæˆçš„ update manifestï¼Œæç¤ºæ¢å¤\n- [ ] æä¾› AI è¾…åŠ©æ›´æ–°çš„ skill/command å°è£…\n\n---\n\n## å®æ–½ä¼˜å…ˆçº§\n\n| ä¼˜å…ˆçº§ | æ¨¡å— | å†…å®¹ | å¤æ‚åº¦ |\n|--------|------|------|--------|\n| P0 | Install | å®‰è£…è„šæœ¬ + æ–‡æ¡£ + ç›®å½•ç»“æ„åˆå§‹åŒ– | ä½ |\n| P0 | Help | `actant help` å‘½ä»¤ + åˆ†ç»„å±•ç¤º | ä½ |\n| P1 | Self-Update | update-manifest è®¾è®¡ + Updater Agent è„šæœ¬ | ä¸­ |\n| P1 | Self-Update | `actant self-update` å‘½ä»¤ï¼ˆé¢„æ£€ â†’ å¤‡ä»½ â†’ å¯åŠ¨ Agent â†’ é€€å‡ºï¼‰ | ä¸­ |\n| P1 | Self-Update | Updater Agent: build â†’ link â†’ verify â†’ å¯åŠ¨ Daemon â†’ è‡ªæ¯ | ä¸­ |\n| P1 | Self-Update | ç”¨æˆ·æ•°æ®ä¿æŠ¤ + å¤‡ä»½/å›æ»šæœºåˆ¶ | ä¸­ |\n| P2 | Self-Update | Daemon å¯åŠ¨æ—¶ manifest æ¢å¤æ£€æµ‹ | ä½ |\n| P2 | Self-Update | `--check` ç‰ˆæœ¬å¯¹æ¯” + update-result æŸ¥è¯¢ | ä½ |\n| P2 | Self-Update | AI è¾…åŠ©æ›´æ–° skill/command å°è£… | ä½ |",
  "author": "human",
  "assignees": [],
  "relatedFiles": [
    "packages/cli/src/program.ts",
    "packages/cli/src/bin/actant.ts",
    "packages/cli/src/updater/updater-agent.ts",
    "packages/cli/src/commands/help.ts",
    "packages/cli/package.json",
    "packages/shared/src/platform/platform.ts",
    "packages/core/src/manager/agent-manager.ts",
    "packages/core/src/manager/launch-mode-handler.ts",
    "packages/core/src/state/instance-meta-io.ts",
    "packages/api/src/daemon/daemon.ts",
    "configs/templates/_system-updater.json",
    "scripts/install.ps1",
    "scripts/install.sh",
    "docs/getting-started.md",
    "package.json"
  ],
  "relatedIssues": [10, 11, 15, 34, 38],
  "taskRef": null,
  "githubRef": null,
  "closedAs": null,
  "comments": [],
  "createdAt": "2026-02-22T12:00:00",
  "updatedAt": "2026-02-22T14:30:00",
  "closedAt": null
}
