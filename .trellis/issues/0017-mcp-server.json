{
  "id": 17,
  "title": "MCP Server — Agent 间通信能力",
  "status": "open",
  "labels": [
    "mcp",
    "feature",
    "protocol",
    "priority:P2"
  ],
  "milestone": "mid-term",
  "body": "## 目标\n\n实现 Actant MCP Server（packages/mcp-server），向其他 Agent 暴露 Agent 管理能力。Agent A 通过 MCP tool call 即可创建、调用、查询 Actant 管理的 Agent。\n\n## 背景\n\nAgent 不能直接用 ACP 和另一个托管 Agent 通信（ACP 连接被 Daemon 独占，Agent 无法扮演 ACP Client 角色）。正确路径是 MCP：Agent 调用 Actant MCP Server 的 tools，MCP Server 内部通过 Actant API 操作目标 Agent。\n\n### 协议分工\n- ACP: 人/应用 ↔ Agent（交互协议）\n- MCP: Agent ↔ 工具/服务（能力协议）\n\n## 架构\n\n```\nAgent A (在 IDE 中运行)\n    │  MCP tool call\nActant MCP Server\n    │  Actant API (JSON-RPC / Unix Socket)\nActant Daemon\n    │  ACP / stdio\nAgent B (headless, 被管理)\n```\n\n## MCP Tools\n\n| Tool | 参数 | 返回 | 说明 |\n|------|------|------|------|\n| actant_run_agent | { template, prompt } | { response, artifacts? } | 创建 ephemeral Agent 执行任务 |\n| actant_prompt_agent | { name, message, sessionId? } | { response, sessionId } | 向持久 Agent 发送消息 |\n| actant_agent_status | { name } | AgentInstanceMeta | 查询状态 |\n| actant_create_agent | { name, template } | { name, workspaceDir, status } | 创建实例（不启动） |\n| actant_list_agents | {} | AgentInstanceMeta[] | 列出所有 Agent |\n\n## 依赖\n\n- #12 ACP 协议集成（agent.run / agent.prompt 需要 Daemon 侧 ACP Client）\n\n## 验收\n\n- [ ] MCP Server 可作为 MCP Server 进程启动\n- [ ] actant_run_agent 可执行完整的 ephemeral Agent 流程\n- [ ] actant_prompt_agent 可向持久 Agent 发送消息\n- [ ] actant_agent_status / list_agents 返回正确状态\n- [ ] Agent A 可通过 MCP tool call 使用以上 tools\n- [ ] 集成测试覆盖核心 tools",
  "author": "cursor-agent",
  "assignees": [],
  "relatedFiles": [
    "packages/mcp-server/"
  ],
  "relatedIssues": [12],
  "taskRef": null,
  "githubRef": "blackplume233/Actant#16",
  "closedAs": null,
  "comments": [],
  "createdAt": "2026-02-20T18:00:00",
  "updatedAt": "2026-02-20T18:00:00",
  "closedAt": null
}
